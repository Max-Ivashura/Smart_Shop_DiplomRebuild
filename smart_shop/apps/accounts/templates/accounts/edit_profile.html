{% extends 'base.html' %}
{% load static %}

{% block page_title %}Редактирование профиля{% endblock %}
{% block meta_description %}Обновите информацию вашего профиля в TechShop{% endblock %}

{% block extra_styles %}
    <link rel="stylesheet" href="{% static 'accounts/css/edit_profile.css' %}">
{% endblock %}

{% block content %}
    <main class="techshop-main techshop-edit-profile">
        <section class="full-width-section profile-bg">
            <div class="techshop-container container">
                <form method="post" enctype="multipart/form-data"> <!-- Добавлено -->
                    {% csrf_token %}
                    <div class="row g-4">
                        <!-- Заголовок -->
                        <div class="col-12">
                            <div class="techshop-edit-profile__title text-center mb-4">
                                <h1 class="h2 mb-3 text-primary-700">
                                    <i class="bi bi-person-gear me-2"></i>
                                    Редактирование профиля
                                </h1>
                                <div class="techshop-profile__divider mx-auto bg-primary-300"></div>
                            </div>
                        </div>

                        <!-- Секция 1: Аватар + Имя и Фамилия -->
                        <div class="col-lg-3">
                            <div class="techshop-edit-profile__card card h-100">
                                <div class="techshop-edit-profile__header card-header bg-primary-500">
                                    <h2 class="h6 mb-0 text-light">
                                        <i class="bi bi-person-circle me-2"></i>
                                        Аватар
                                    </h2>
                                </div>
                                <div class="card-body">
                                    <!-- Аватар -->
                                    <div class="techshop-edit-profile__avatar">
                                        <label for="id_avatar" class="techshop-edit-profile__avatar-preview">
                                            <img src="
                                                    {% if user.avatar %}{{ user.avatar.url }}{% else %}{% static 'accounts/images/avatar.png' %}{% endif %}"
                                                 alt="Аватар"
                                                 width="220"
                                                 height="220">
                                            <div class="techshop-edit-profile__avatar-overlay">
                                                <i class="bi bi-camera-fill fs-3 text-light"></i>
                                            </div>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Секция 2: Основные данные -->
                        <div class="col-lg-3">
                            <div class="techshop-edit-profile__card card h-100">
                                <div class="techshop-edit-profile__header card-header bg-primary-500">
                                    <h2 class="h6 mb-0 text-light">
                                        <i class="bi bi-person-lines-fill me-2"></i>
                                        Основные данные
                                    </h2>
                                </div>
                                <div class="card-body">
                                    <div class="row g-3">
                                        <div class="col-12">
                                            <label class="techshop-edit-profile__label text-primary-700">Имя</label>
                                            {{ form.first_name }}
                                        </div>
                                        <div class="col-12">
                                            <label class="techshop-edit-profile__label text-primary-700">Фамилия</label>
                                            {{ form.last_name }}
                                        </div>
                                        <div class="col-12">
                                            <label class="techshop-edit-profile__label text-primary-700">Дата
                                                рождения</label>
                                            <div class="input-group">
                                                {{ form.birth_date }}
                                                <span class="input-group-text">
                                                <i class="bi bi-calendar text-primary-500"></i>
                                            </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Секция 3: Дополнительные данные -->
                        <div class="col-lg-6">
                            <div class="techshop-edit-profile__card card h-100">
                                <div class="techshop-edit-profile__header card-header bg-primary-500">
                                    <h2 class="h6 mb-0 text-light">
                                        <i class="bi bi-telephone me-2"></i>
                                        Дополнительные данные
                                    </h2>
                                </div>
                                <div class="card-body">
                                    <div class="row g-3">
                                        <div class="col-12">
                                            <label class="techshop-edit-profile__label text-primary-700">Email</label>
                                            <div class="input-group">
                                                {{ form.email }}
                                                <span class="input-group-text">
                                                <i class="bi bi-envelope text-primary-500"></i>
                                            </span>
                                            </div>
                                        </div>
                                        <div class="col-12">
                                            <label class="techshop-edit-profile__label text-primary-700">Телефон</label>
                                            <div class="input-group">
                                                {{ form.phone }}
                                                <span class="input-group-text">
                                                <i class="bi bi-phone text-primary-500"></i>
                                            </span>
                                            </div>
                                        </div>
                                        <div class="col-12">
                                            <label class="techshop-edit-profile__label text-primary-700">Адрес</label>
                                            <div class="input-group">
                                                {{ form.address }}
                                                <span class="input-group-text">
                                                <i class="bi bi-geo-alt text-primary-500"></i>
                                            </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Кнопка сохранения -->
                        <div class="col-12 mt-4">
                            <div class="d-grid">
                                <button type="submit" class="btn techshop-edit-profile__btn btn-primary-500">
                                    <i class="bi bi-save me-2"></i>
                                    Сохранить изменения
                                </button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </section>
    </main>
{% endblock %}

{% block scripts %}

    <script src="{% static 'accounts/js/edit_profile.js' %}"></script>
{% endblock %}